#!/bin/sh
set -eu

# Returns if the first argument starts with the second argument
starts_with() {
    case "$1" in
        "$2"*) return 0;
    esac;
    return 1;
}

if [ -z "$WAYLAND_DISPLAY" ]; then
    echo "$XDG_RUNTIME_DIR/wayland-0"
elif starts_with "$WAYLAND_DISPLAY" "/"; then
    # WAYLAND_DISPLAY is absolute path, return it
    echo "$WAYLAND_DISPLAY"
else
    # WAYLAND_DISPLAY is a name in XDG_RUNTIME_DIR
    echo "$XDG_RUNTIME_DIR/$WAYLAND_DISPLAY"
fi
